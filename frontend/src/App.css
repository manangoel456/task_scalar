/* ==========================================================================
   Complete App Stylesheet
   ========================================================================== */

/* ==========================================================================
   1. Root variables & base styles
   ========================================================================== */
:root {
  /* Colors */
  --primary-color: #4e9eff;         /* refined primary */
  --trello-blue: #0079bf;           /* original Trello-like blue (available) */
  --bg-dark: #1e1f23;
  --bg-dark-secondary: #2a2d33;
  --border-dark: #3d434a;
  --muted: #9aa6b2;
  --text-light: #c7d1dc;
  --text-lighter: #ffffff;
  --success-color: #4caf50;
  --danger-color: #e53935;

  /* Layout */
  --border-radius: 8px;
  --navbar-height: 58px;
  --sidebar-width: 240px;

  /* Effects */
  --shadow-sm: 0 2px 6px rgba(0,0,0,0.18);
  --shadow-md: 0 6px 18px rgba(0,0,0,0.24);
  --transition: 180ms ease-in-out;
}

/* Reset & base */
* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body {
  margin: 0;
  padding: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Inter', 'Helvetica Neue', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: var(--bg-dark);
  color: var(--text-light);
  line-height: 1.35;
  font-size: 14px;
}

a { color: var(--primary-color); text-decoration: none; transition: color var(--transition); }
a:hover { color: #82b8ff; }

/* ==========================================================================
   2. Layout & core components
   ========================================================================== */
.app-container {
  height: calc(100vh - var(--navbar-height));
  display: flex;
  flex-direction: column;
}

.navbar {
  height: var(--navbar-height);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.6rem 1.25rem;
  background-color: var(--bg-dark-secondary);
  border-bottom: 1px solid var(--border-dark);
  color: var(--text-lighter);
  box-shadow: var(--shadow-sm);
  z-index: 50;
}

.navbar-left { display:flex; align-items:center; gap: 1rem; }
.navbar ul { display:flex; gap: 0.8rem; align-items:center; margin:0; padding:0; list-style:none; }
.navbar ul li { margin: 0; }

.sidebar-toggle-btn {
  background: none;
  border: none;
  color: var(--text-light);
  font-size: 1.4rem;
  cursor: pointer;
}

/* Dashboard / main layout */
.dashboard-layout {
  display: flex;
  height: calc(100vh - var(--navbar-height));
}

.sidebar {
  width: var(--sidebar-width);
  flex-shrink: 0;
  background-color: var(--bg-dark-secondary);
  padding: 1rem;
  border-right: 1px solid var(--border-dark);
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  transition: transform var(--transition), width var(--transition);
}

.sidebar-compact .sidebar { width: 64px; overflow: hidden; }

.main-content {
  flex: 1;
  padding: 1.5rem;
  overflow-y: auto;
  transition: margin-left var(--transition);
}

/* Collapsed sidebar transform helper */
.dashboard-layout.sidebar-closed .sidebar {
  transform: translateX(-100%);
}

/* ==========================================================================
   3. Sidebar & navigation elements
   ========================================================================== */
.sidebar-link {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.65rem 0.9rem;
  border-radius: calc(var(--border-radius) - 2px);
  color: var(--text-light);
  text-decoration: none;
  transition: background-color var(--transition), color var(--transition);
}
.sidebar-link:hover { background-color: #33383f; }

.sidebar-link.active {
  background-color: var(--primary-color);
  color: var(--text-lighter);
  box-shadow: var(--shadow-sm);
}

/* Workspaces list */
.sidebar-workspaces {
  margin-top: 1rem;
  border-top: 1px solid var(--border-dark);
  padding-top: 0.75rem;
}

.workspaces-header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom: 0.5rem;
  gap: 0.5rem;
}
.workspaces-title { font-size: 0.9rem; font-weight: 700; color: var(--text-lighter); }
.add-workspace-btn {
  background: none;
  border: none;
  color: var(--text-light);
  font-size: 1.25rem;
  cursor: pointer;
  padding: 0;
}
.add-workspace-btn:hover { color: var(--text-lighter); }

.workspace-item {
  display:flex;
  align-items:center;
  gap:0.75rem;
  padding:0.5rem;
  border-radius: calc(var(--border-radius) - 2px);
  color: var(--text-light);
  text-decoration:none;
  transition: background var(--transition);
}
.workspace-item:hover { background-color: #33383f; }
.workspace-item.active { background-color: #444c56; color: var(--text-lighter); }

.workspace-icon {
  width: 36px;
  height: 36px;
  border-radius: 6px;
  background: linear-gradient(135deg,#6e48aa,#9d50bb);
  display:flex;
  align-items:center;
  justify-content:center;
  color:white;
  font-weight:700;
}

/* ==========================================================================
   4. Page-specific styles
   ========================================================================== */

/* Generic headings */
h1, h2, h3, h4 { color: var(--text-lighter); margin: 0; }
h2 { font-size: 1.5rem; margin-bottom: 0.5rem; }

/* Auth forms */
.auth-form {
  max-width: 420px;
  margin: 2.25rem auto;
  padding: 2rem;
  background: var(--bg-dark-secondary);
  border-radius: var(--border-radius);
  border: 1px solid var(--border-dark);
  box-shadow: var(--shadow-sm);
}
.auth-form h1, .auth-form p { text-align: center; color: var(--text-lighter); }
.auth-form input {
  display:block; width:100%; padding: 0.8rem; margin-bottom: 1rem;
  border-radius: calc(var(--border-radius) - 4px);
  background: var(--bg-dark);
  border: 1px solid var(--border-dark);
  color: var(--text-light);
}
.auth-form button {
  width:100%; padding:0.8rem; border:none; border-radius: calc(var(--border-radius) - 4px);
  background: var(--primary-color); color: var(--text-lighter); cursor:pointer;
}

/* Boards home */
.boards-page-container { padding: 0.25rem 0; }
.boards-page-header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap: 1rem;
  margin-bottom: 1.25rem;
  flex-wrap: wrap;
}
.search-bar-container { display:flex; align-items:center; gap: 0.5rem; }
.search-input {
  padding: 0.6rem 1rem;
  width: 260px;
  border-radius: calc(var(--border-radius) - 4px);
  border: 1px solid var(--border-dark);
  background: var(--bg-dark);
  color: var(--text-light);
  transition: border-color var(--transition), box-shadow var(--transition);
}
.search-input:focus { outline:none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(78,158,255,0.08); }

/* Boards grid */
.boards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 1rem;
  align-items: start;
  margin-top: 0.5rem;
}

.board-tile {
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 1rem;
  border-radius: var(--border-radius);
  font-weight:700;
  color: var(--text-lighter);
  background: linear-gradient(135deg,#6e48aa,#9d50bb);
  box-shadow: var(--shadow-sm);
  text-decoration: none;
  text-align:center;
  transition: transform var(--transition), box-shadow var(--transition);
}
.board-tile:hover { transform: translateY(-4px); box-shadow: var(--shadow-md); }

.create-board-tile {
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  color: var(--text-light);
  border: 1px dashed var(--border-dark);
  cursor: pointer;
  align-items:center; justify-content:center;
}
.create-board-tile:hover { background: #33383f; border-style: solid; color: var(--text-lighter); }

/* Board view (kanban) */
.board-view {
  height: 100%;
  background: linear-gradient(135deg,#4e54c8,#8f94fb);
  overflow-x: auto;
  overflow-y: hidden;
  white-space: nowrap;
  padding: 1rem;
  box-sizing: border-box;
}
.board-view .board-header { margin-bottom: 1rem; padding: 0 0.5rem; }
.board-view h1 { color: var(--text-lighter); text-shadow: 0 1px 3px rgba(0,0,0,0.18); }

/* Lists & cards */
.lists-container {
  display:flex;
  gap: 1rem;
  align-items:flex-start;
  height: calc(100% - 60px);
  padding-bottom: 1rem;
}
.list {
  width: 272px;
  background: rgba(0,0,0,0.22);
  border-radius: calc(var(--border-radius));
  padding: 0.75rem;
  flex-shrink: 0;
  display:flex;
  flex-direction: column;
  max-height: 100%;
}
.list h3 { font-size: 1rem; font-weight: 700; margin-bottom: 0.5rem; color: var(--text-lighter); }

.card-list {
  min-height: 20px;
  overflow-y: auto;
  padding-right: 6px; /* avoid clipped scrollbar */
}
.card {
  background: var(--bg-dark-secondary);
  border-radius: calc(var(--border-radius) - 2px);
  padding: 0.75rem;
  margin-bottom: 0.75rem;
  box-shadow: var(--shadow-sm);
  color: var(--text-light);
  cursor: pointer;
  transition: background var(--transition), transform var(--transition);
}
.card:hover { background: #363b44; transform: translateY(-2px); }

/* Card small UI */
.card .card-description-icon {
  position: absolute;
  bottom: 8px;
  right: 8px;
  font-size: 0.8rem;
  color: var(--text-light);
}

/* Add card */
.add-card-container { padding-top: 0.5rem; }
.add-card-button {
  width:100%;
  padding: 0.55rem;
  border:none;
  border-radius: 6px;
  background: transparent;
  color: var(--text-light);
  text-align: left;
  cursor:pointer;
}
.add-card-button:hover { background-color: rgba(255,255,255,0.03); }

/* Add card form */
.add-card-form textarea {
  width:100%; min-height: 60px; padding: 0.5rem; resize: vertical;
  border-radius: 6px; border: 1px solid var(--border-dark);
  background: var(--bg-dark); color: var(--text-light);
}
.add-card-form .form-actions { display:flex; gap: 0.5rem; align-items:center; }

/* ==========================================================================
   5. Modals & forms
   ========================================================================== */
.modal-backdrop {
  position: fixed; inset: 0;
  background-color: rgba(0,0,0,0.6);
  display:flex; align-items:center; justify-content:center;
  z-index: 1000;
}
.modal {
  background: var(--bg-dark-secondary);
  border: 1px solid var(--border-dark);
  color: var(--text-light);
  padding: 1.5rem;
  border-radius: var(--border-radius);
  width: 92%;
  max-width: 640px;
  box-shadow: var(--shadow-md);
}

.modal h2 { margin-top: 0; color: var(--text-lighter); }
.modal form { display:flex; flex-direction:column; gap: 0.75rem; }

.modal input, .modal select, .modal textarea {
  padding: 0.8rem; border-radius: calc(var(--border-radius) - 4px);
  background: var(--bg-dark); color: var(--text-light);
  border: 1px solid var(--border-dark);
}

/* Modal actions */
.modal .modal-actions { display:flex; justify-content:flex-end; gap: 0.5rem; margin-top: 0.5rem; }
.modal .modal-actions button {
  padding: 0.5rem 0.9rem; border-radius: 6px; border:none; cursor:pointer;
}
.modal .modal-actions button[type="submit"] { background: var(--success-color); color: #fff; }
.modal .modal-actions button[type="button"] { background: var(--border-dark); color: var(--text-light); }

/* ==========================================================================
   6. Sidebar & board view forms
   ========================================================================== */
.create-ws-form-sidebar, .add-list-form {
  margin-bottom: 1rem;
  background-color: var(--bg-dark-secondary);
  padding: 0.6rem;
  border-radius: 10px;
}
.create-ws-form-sidebar input, .add-list-form input {
  width:100%; padding:0.7rem; border-radius:6px; background: var(--bg-dark);
  border:1px solid var(--border-dark); color: var(--text-light);
}
.form-actions-sidebar, .add-list-form .form-actions { display:flex; gap:0.5rem; align-items:center; }

.form-actions-sidebar button, .add-list-form .form-actions button {
  padding: 0.45rem 0.8rem; border-radius: 6px; border: none; cursor:pointer;
}
.form-actions-sidebar button[type="submit"], .add-list-form .form-actions button[type="submit"] {
  background: var(--success-color); color: #fff;
}
.form-actions-sidebar button[type="button"], .add-list-form .form-actions button[type="button"] {
  background: var(--border-dark); color: var(--text-light); font-weight: 600;
}

.add-list-button {
  width:100%; padding: 0.75rem; border:none; border-radius: 10px;
  background: rgba(255,255,255,0.03); color: var(--text-light); cursor:pointer; text-align:left;
}
.add-list-button:hover { background: rgba(255,255,255,0.06); }

/* ==========================================================================
   7. Card details modal & meta
   ========================================================================== */
.card-details-modal { background-color: var(--bg-dark-secondary); padding: 1rem; border-radius: var(--border-radius); position: relative; }
.card-details-title {
  font-size: 1.4rem; font-weight: 700; color: var(--text-lighter);
  border: none; background: none; padding: 0.25rem 0; margin: -0.25rem 0 0.5rem 0;
}
.card-details-title:focus { outline:none; background-color: transparent; }

.card-details-description {
  width:100%; min-height:100px; background: var(--bg-dark); border:1px solid var(--border-dark);
  color: var(--text-light); border-radius: 6px; padding:0.6rem;
}
.card-details-modal .save-btn { background: var(--success-color); color: #fff; padding: 0.5rem 0.8rem; border-radius:6px; border:none; cursor:pointer; }
.card-details-modal .delete-btn {
  position:absolute; bottom: 1rem; left:1rem; background: var(--danger-color); color: #fff; border:none; padding:0.4rem 0.8rem; border-radius:6px; cursor:pointer;
}

/* Card attributes (labels, assignees, footer) */
.card-labels { display:flex; gap:6px; margin-bottom:8px; }
.card-label { padding:2px 8px; font-size: 0.75rem; border-radius:12px; color: #fff; font-weight:700; }
.card-footer { display:flex; justify-content:space-between; align-items:center; margin-top:12px; }
.card-due-date { font-size: 0.82rem; color: var(--muted); }
.card-assignees { display:flex; align-items:center; }

/* Assignee avatars stack */
.assignee-avatar { width:28px; height:28px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:0.8rem; font-weight:700; background: var(--primary-color); color:#fff; margin-left: -8px; border: 2px solid var(--bg-dark-secondary); overflow: hidden; }
.assignee-avatar img { width:100%; height:100%; object-fit:cover; border-radius:50%; }

/* ==========================================================================
   8. Share modal, search results & members list
   ========================================================================== */
.share-modal .form-group { margin-bottom: 1rem; }
.share-modal label { display:block; margin-bottom:0.5rem; font-weight: 700; color: var(--text-lighter); }
.share-modal input { width:100%; padding:0.6rem; border-radius:6px; border:1px solid var(--border-dark); background: var(--bg-dark); color: var(--text-light); }

.share-message { font-size:0.9rem; padding:0.5rem; background:var(--border-dark); border-radius:6px; text-align:center; color: var(--text-lighter); }

.search-results {
  list-style:none; padding:0; margin: 1rem 0; border:1px solid var(--border-dark);
  border-radius:6px; max-height:150px; overflow-y:auto; background: var(--bg-dark);
}
.search-results li { padding:0.5rem 0.75rem; display:flex; justify-content:space-between; align-items:center; }
.search-results li:not(:last-child) { border-bottom: 1px solid var(--border-dark); }
.search-results button { padding:0.35rem 0.7rem; border-radius:6px; border:none; background: var(--success-color); color:#fff; cursor:pointer; }

/* Members list */
.members-list { margin-top:1rem; }
.members-list h3 { margin-bottom:0.5rem; border-bottom:1px solid var(--border-dark); padding-bottom:0.5rem; color:var(--text-lighter); }
.members-list ul { list-style:none; padding:0; margin:0; }
.members-list li { padding:0.5rem; background: var(--bg-dark); border-radius:6px; margin-bottom:0.5rem; display:flex; justify-content:space-between; align-items:center; }

/* Remove member */
.remove-member-btn { background: #c74141; color: #fff; border:none; padding:0.3rem 0.7rem; border-radius:6px; cursor:pointer; font-size:0.8rem; }

/* Share button */
.share-btn { padding:0.5rem 1rem; background:#454c54; color: var(--text-lighter); border:none; border-radius:6px; cursor:pointer; }
.share-btn:hover { background:#5a636c; }

/* ==========================================================================
   9. Notifications
   ========================================================================== */
.notifications-icon { position:relative; cursor:pointer; font-size:1.4rem; display:flex; align-items:center; }
.notification-badge {
  position:absolute; top:-6px; right:-8px; background:#e53935; color:#fff; border-radius:50%; padding:2px 6px; font-size:0.7rem; font-weight:700;
}
.notifications-dropdown {
  position:absolute; top:44px; right:0; width:300px; background:var(--bg-dark-secondary); border:1px solid var(--border-dark); border-radius:8px; box-shadow:var(--shadow-md); z-index:80; overflow:hidden;
}
.notification-item { padding:1rem; border-bottom:1px solid var(--border-dark); }
.notification-item:last-child { border-bottom:none; }
.notification-item p { margin:0 0 0.5rem 0; color: var(--text-light); }
.notification-actions .accept-btn { background: var(--success-color); color: #fff; border:none; padding:0.35rem 0.7rem; border-radius:6px; cursor:pointer; }

/* ==========================================================================
   10. Profile page & dropdown
   ========================================================================== */
.profile-page { max-width: 780px; margin: 0 auto; padding: 1rem; }
.profile-page h2 { color: var(--text-lighter); border-bottom:1px solid var(--border-dark); padding-bottom:1rem; margin-bottom:1rem; }
.profile-form { background:var(--bg-dark-secondary); padding:1.25rem; border-radius:8px; margin-bottom:1rem; }
.profile-form label { display:block; margin-bottom:0.5rem; color: var(--text-light); }
.profile-form input { width:100%; padding:0.7rem; border-radius:6px; background: var(--bg-dark); border:1px solid var(--border-dark); color: var(--text-light); }
.profile-form button { padding:0.6rem 1.1rem; border-radius:6px; background: var(--primary-color); color:#fff; border:none; cursor:pointer; }

/* Profile dropdown */
.profile-menu-container { position:relative; display:inline-block; }
.profile-avatar { width:36px; height:36px; border-radius:50%; background:#454c54; color:var(--text-lighter); display:flex; align-items:center; justify-content:center; font-weight:700; cursor:pointer; }
.profile-dropdown {
  position:absolute; top:44px; right:0; width:160px; background:var(--bg-dark-secondary); border:1px solid var(--border-dark); border-radius:8px; box-shadow:var(--shadow-md); overflow:hidden;
}
.profile-dropdown a { display:block; padding:0.75rem 1rem; color:var(--text-light); text-decoration:none; }
.profile-dropdown a:hover { background:#33383f; }

/* ==========================================================================
   11. Card details, meta & comments
   ========================================================================== */
.details-section { margin-top:1rem; color: var(--text-light); }
.details-section p { margin:0 0 0.5rem 0; font-weight:700; }
.assignees-list { display:flex; gap:0.5rem; flex-wrap:wrap; }
.assignee-option { padding:0.35rem 0.6rem; background:var(--bg-dark); border:1px solid var(--border-dark); border-radius:6px; cursor:pointer; color: var(--text-light); }
.assignee-option.selected { background: var(--primary-color); color: #fff; border-color: var(--primary-color); }

.card-meta { font-size:0.85rem; color: var(--muted); opacity:0.95; }
.comments-list { margin-top:0.5rem; max-height:200px; overflow-y:auto; }
.comment { display:flex; gap:0.75rem; margin-bottom:1rem; }
.comment-author-avatar { width:32px; height:32px; border-radius:50%; background:var(--primary-color); display:flex; align-items:center; justify-content:center; color:#fff; font-weight:700; }
.comment-content { background: var(--bg-dark); padding:0.5rem 0.75rem; border-radius:6px; width:100%; }
.comment-content b { color: var(--text-lighter); }
.comment-date { font-size:0.78rem; opacity:0.75; }

/* Comment form */
.comment-form textarea { width:100%; min-height:50px; padding:0.5rem; border-radius:6px; border:1px solid var(--border-dark); background: var(--bg-dark); color: var(--text-light); }
.comment-form button { background: var(--success-color); color:#fff; border:none; padding:0.5rem 0.9rem; border-radius:6px; cursor:pointer; }

/* ==========================================================================
   12. Utility & small components
   ========================================================================== */
.board-owner { display:block; font-size:0.83rem; font-weight:400; margin-top:0.5rem; color: rgba(255,255,255,0.75); }

.workspaces-controls { display:flex; align-items:center; gap:0.5rem; }
.chevron { font-size:0.8rem; transition: transform var(--transition); }
.chevron.open { transform: rotate(180deg); }

.search-results { background:var(--bg-dark); border:1px solid var(--border-dark); border-radius:6px; overflow:auto; }

/* No-results fallback */
.no-results { padding: 1rem; text-align: center; color: var(--muted); }

/* Buttons */
.btn {
  padding: 0.5rem 0.9rem; border-radius:6px; border:none; cursor:pointer;
}
.btn-primary { background: var(--primary-color); color: #fff; }
.btn-ghost { background: transparent; border: 1px solid var(--border-dark); color: var(--text-light); }

/* ==========================================================================
   13. Responsive helpers
   ========================================================================== */
@media (max-width: 980px) {
  .sidebar { width: 200px; }
  .search-input { width: 200px; }
  .boards-grid { grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); }
}

@media (max-width: 720px) {
  .dashboard-layout { flex-direction: column; }
  .sidebar { order: 2; width: 100%; transform: translateY(0); border-right: none; border-top: 1px solid var(--border-dark); }
  .main-content { order: 1; padding: 1rem; }
  .boards-grid { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 0.75rem; }
  .search-input { width: 100%; }
}

/* ==========================================================================
   14. Small accessibility tweaks
   ========================================================================== */
:focus { outline: none; }
a:focus, button:focus, input:focus, textarea:focus { box-shadow: 0 0 0 3px rgba(78,158,255,0.08); border-color: var(--primary-color); }

/* End of stylesheet */
